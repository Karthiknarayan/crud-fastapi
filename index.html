<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Team Manager</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>üèè Team Manager</h1>

    <!-- Show all teams -->
    <section>
      <h2>All Teams</h2>
      <button onclick="getAllTeams()">Load Teams</button>
      <pre id="allTeams"></pre>
    </section>

    <!-- Get team by ID -->
    <section>
      <h2>Get Team by ID</h2>
      <input type="number" id="teamId" placeholder="Enter team ID">
      <button onclick="getTeamById()">Get Team</button>
      <pre id="singleTeam"></pre>
    </section>

    <!-- Add new team -->
    <section>
      <h2>Add New Team</h2>
      <input type="text" id="teamName" placeholder="Team Name">
      <input type="number" id="titles" placeholder="Number of Titles">
      <button onclick="addTeam()">Add Team</button>
      <pre id="addResult"></pre>
    </section>

    <!-- Modify team -->
    <section>
      <h2>Modify Team</h2>
      <input type="number" id="modifyId" placeholder="Team ID">
      <input type="text" id="modifyName" placeholder="New Team Name">
      <input type="number" id="modifyTitles" placeholder="New Number of Titles">
      <button onclick="modifyTeam()">Modify Team</button>
      <pre id="modifyResult"></pre>
    </section>

    <!-- Delete team -->
    <section>
      <h2>Delete Team</h2>
      <input type="number" id="deleteId" placeholder="Enter Team ID">
      <button onclick="deleteTeam()">Delete Team</button>
      <pre id="deleteResult"></pre>
    </section>
  </div>

  <script>
    const BASE_URL = "http://127.0.0.1:8000";

    async function getAllTeams() {
      let res = await fetch(BASE_URL + "/");
      let data = await res.json();
      document.getElementById("allTeams").textContent = JSON.stringify(data, null, 2);
    }

    async function getTeamById() {
      let id = document.getElementById("teamId").value;
      let res = await fetch(BASE_URL + "/" + id);
      let data = await res.json();
      document.getElementById("singleTeam").textContent = JSON.stringify(data, null, 2);
    }

    async function addTeam() {
      let team = {
        team: document.getElementById("teamName").value,
        number_of_titles: parseInt(document.getElementById("titles").value)
      };
      let res = await fetch(BASE_URL + "/additem", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(team)
      });
      let data = await res.json();
      document.getElementById("addResult").textContent = JSON.stringify(data, null, 2);
    }

    async function modifyTeam() {
      let id = document.getElementById("modifyId").value;
      let team = {
        team: document.getElementById("modifyName").value,
        number_of_titles: parseInt(document.getElementById("modifyTitles").value)
      };
      let res = await fetch(BASE_URL + "/modify?id=" + id, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(team)
      });
      let data = await res.json();
      document.getElementById("modifyResult").textContent = JSON.stringify(data, null, 2);
    }

    async function deleteTeam() {
      let id = document.getElementById("deleteId").value;
      let res = await fetch(BASE_URL + "/" + id, { method: "DELETE" });
      let data = await res.json();
      document.getElementById("deleteResult").textContent = JSON.stringify(data, null, 2);
    }
  </script>
</body>
</html>
